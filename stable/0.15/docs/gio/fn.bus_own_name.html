<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Starts acquiring `name` on the bus specified by `bus_type` and calls `name_acquired_handler` and `name_lost_handler` when the name is acquired respectively lost. Callbacks will be invoked in the [thread-default main context][g-main-context-push-thread-default] of the thread you are calling this function from."><meta name="keywords" content="rust, rustlang, rust-lang, bus_own_name"><title>bus_own_name in gio - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]-->
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", checkDocsLatestStable);

    function checkDocsLatestStable() {
        function popup(msg, url) { return `
            <style scoped="scoped">
                .popup {
                    max-width: 16em;
                    background-color: #fff;
                    position: fixed;
                    z-index: 1;
                    margin-left: auto;
                    bottom: 1em;
                    right: 1em;
                    border-radius: 5px;
                    box-shadow: 1px 1px 4px #777;
                }

                .popup a.version {
                    color: #e57300;
                    padding: 0.6em 1em;
                    display: block;
                }
                .popup a.version:hover {
                    color: #b25900;
                }

                .popup a.close {
                    color: white;
                    background: grey;
                    border-radius: 99px;
                    display: inline-block;
                    width: 19px;
                    line-height: 19px;
                    font-weight: bold;
                    text-align: center;
                    margin: 0.6em;
                    float: right;
                }
                .popup a.close:hover {
                    background: black;
                }
            </style>
            <section class="popup" id="gir_docs_popup">
                <a class="close" href="#" onclick="document.getElementById('gir_docs_popup').remove(); return false">×</a>
                <a class="version" href="https://gtk-rs.org/gtk-rs-core/stable/latest/docs">
                    ⚠ ${msg}
                </a>
            </section>
        ` };

        if ("0.15" == "master") {
            document.body.insertAdjacentHTML(
                'beforeend',
                popup("This is the development version. Go to latest stable version.", "stable/latest")
            );
        } else {
            fetch('https://gtk-rs.org/gtk-rs-core/LATEST_RELEASE_BRANCH')
                .then(response => response.text())
                .then(latest_branch => {
                    if (latest_branch.trim() != "0.15") {
                        document.body.insertAdjacentHTML(
                            'beforeend',
                            popup("This version is outdated. Go to latest version.", "stable/latest")
                        );
                    }
                });
        }
    }
</script>


<nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../gio/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../gio/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><div class="sidebar-elems"><h2 class="location"><a href="index.html">In gio</a></h2></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../gio/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1">
                                <a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div>
                        </div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Function <a href="index.html">gio</a>::<wbr><a class="fn" href="#">bus_own_name</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/gio/dbus.rs.html#160-191">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust fn"><code>pub fn bus_own_name&lt;BusAcquired, NameAcquired, NameLost&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;bus_type: <a class="enum" href="enum.BusType.html" title="enum gio::BusType">BusType</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;name: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;flags: <a class="struct" href="struct.BusNameOwnerFlags.html" title="struct gio::BusNameOwnerFlags">BusNameOwnerFlags</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;bus_acquired: BusAcquired, <br>&nbsp;&nbsp;&nbsp;&nbsp;name_acquired: NameAcquired, <br>&nbsp;&nbsp;&nbsp;&nbsp;name_lost: NameLost<br>) -&gt; <a class="struct" href="struct.OwnerId.html" title="struct gio::OwnerId">OwnerId</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;BusAcquired: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="struct" href="struct.DBusConnection.html" title="struct gio::DBusConnection">DBusConnection</a>, &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;NameAcquired: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="struct" href="struct.DBusConnection.html" title="struct gio::DBusConnection">DBusConnection</a>, &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;NameLost: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.DBusConnection.html" title="struct gio::DBusConnection">DBusConnection</a>&gt;, &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static,&nbsp;</span></code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Starts acquiring <code>name</code> on the bus specified by <code>bus_type</code> and calls
<code>name_acquired_handler</code> and <code>name_lost_handler</code> when the name is
acquired respectively lost. Callbacks will be invoked in the
[thread-default main context][g-main-context-push-thread-default]
of the thread you are calling this function from.</p>
<p>You are guaranteed that one of the <code>name_acquired_handler</code> and <code>name_lost_handler</code>
callbacks will be invoked after calling this function - there are three
possible cases:</p>
<ul>
<li>
<p><code>name_lost_handler</code> with a <a href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html#variant.None" title="None"><code>None</code></a> connection (if a connection to the bus
can’t be made).</p>
</li>
<li>
<p><code>bus_acquired_handler</code> then <code>name_lost_handler</code> (if the name can’t be
obtained)</p>
</li>
<li>
<p><code>bus_acquired_handler</code> then <code>name_acquired_handler</code> (if the name was
obtained).</p>
</li>
</ul>
<p>When you are done owning the name, just call <code>g_bus_unown_name()</code>
with the owner id this function returns.</p>
<p>If the name is acquired or lost (for example another application
could acquire the name if you allow replacement or the application
currently owning the name exits), the handlers are also invoked.
If the <a href="struct.DBusConnection.html" title="crate::DBusConnection"><code>DBusConnection</code></a> that is used for attempting to own the name
closes, then <code>name_lost_handler</code> is invoked since it is no longer
possible for other processes to access the process.</p>
<p>You cannot use <code>g_bus_own_name()</code> several times for the same name (unless
interleaved with calls to <code>g_bus_unown_name()</code>) - only the first call
will work.</p>
<p>Another guarantee is that invocations of <code>name_acquired_handler</code>
and <code>name_lost_handler</code> are guaranteed to alternate; that
is, if <code>name_acquired_handler</code> is invoked then you are
guaranteed that the next time one of the handlers is invoked, it
will be <code>name_lost_handler</code>. The reverse is also true.</p>
<p>If you plan on exporting objects (using e.g.
<code>g_dbus_connection_register_object()</code>), note that it is generally too late
to export the objects in <code>name_acquired_handler</code>. Instead, you can do this
in <code>bus_acquired_handler</code> since you are guaranteed that this will run
before <code>name</code> is requested from the bus.</p>
<p>This behavior makes it very simple to write applications that wants
to [own names][gdbus-owning-names] and export objects.
Simply register objects to be exported in <code>bus_acquired_handler</code> and
unregister the objects (if any) in <code>name_lost_handler</code>.</p>
<h3 id="bus_type"><a href="#bus_type"><code>bus_type</code></a></h3>
<p>the type of bus to own a name on</p>
<h3 id="name"><a href="#name"><code>name</code></a></h3>
<p>the well-known name to own</p>
<h3 id="flags"><a href="#flags"><code>flags</code></a></h3>
<p>a set of flags from the <a href="struct.BusNameOwnerFlags.html" title="crate::BusNameOwnerFlags"><code>BusNameOwnerFlags</code></a> enumeration</p>
<h3 id="bus_acquired_handler"><a href="#bus_acquired_handler"><code>bus_acquired_handler</code></a></h3>
<p>handler to invoke when connected to the bus of type <code>bus_type</code> or <a href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html#variant.None" title="None"><code>None</code></a></p>
<h3 id="name_acquired_handler"><a href="#name_acquired_handler"><code>name_acquired_handler</code></a></h3>
<p>handler to invoke when <code>name</code> is acquired or <a href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html#variant.None" title="None"><code>None</code></a></p>
<h3 id="name_lost_handler"><a href="#name_lost_handler"><code>name_lost_handler</code></a></h3>
<p>handler to invoke when <code>name</code> is lost or <a href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html#variant.None" title="None"><code>None</code></a></p>
<h2 id="returns"><a href="#returns">Returns</a></h2>
<p>an identifier (never 0) that can be used with
<code>g_bus_unown_name()</code> to stop owning the name.</p>
</div></details></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="gio" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.64.0-nightly (c80c4b8fd 2022-06-26)" ></div>
</body></html>